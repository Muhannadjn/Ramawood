
// Language translations
const translations = {
  en: {
    // Navigation
    'nav-home': 'Home',
    'nav-about': 'About',
    'nav-products': 'Products',
    'nav-team': 'Team',
    'nav-impact': 'Impact',
    'nav-contact': 'Contact',
    
    // Hero Section
    'hero-title': 'Trusted Swedish Company for Global Wood Trading',
    'hero-subtitle': 'Premium quality wood products with over 10 years of expertise in international trading',
    'hero-cta-primary': 'Explore Products',
    'hero-cta-secondary': 'Contact Us',
    
    // About Section
    'about-title': 'About RamaWood',
    'about-subtitle': 'Building trust through quality and expertise',
    'about-description': 'RamaWood is a trusted Swedish company with over 10 years of experience in importing and exporting premium wood types. We are known for our trust, quality, and exceptional customer experience. Our commitment to sustainability and excellence has made us a preferred partner for businesses worldwide.',
    'feature-quality': 'Premium Quality',
    'feature-global': 'Global Reach',
    'feature-trust': 'Trusted Partner',
    
    // Products Section
    'products-title': 'Our Premium Wood Products',
    'products-subtitle': 'Carefully sourced from around the world',
    'product-beech-name': 'Beech Wood',
    'product-beech-desc': 'Strong and ideal for modern furniture. From Romania, Ukraine, Bosnia, Sweden. Expensive, high demand, great profit.',
    'product-pine-name': 'Pine Wood',
    'product-pine-desc': 'Most affordable. Great for kitchens and doors. From Sweden, Russia, Finland. High volume sales and profit.',
    'product-mdf-name': 'MDF Wood',
    'product-mdf-desc': 'Used in budget furniture and offices. From Turkey, China, Malaysia. Low cost, profitable in bulk.',
    'product-oak-name': 'Oak Wood',
    'product-oak-desc': 'Premium material for luxury furniture and floors. From USA, Eastern Europe. Niche, high return.',
    'product-teak-name': 'Teak Wood',
    'product-teak-desc': 'Waterproof and perfect for outdoor furniture. From India, Burma, Indonesia. Expensive, specific market.',
    
    // Team Section
    'team-title': 'Our Expert Team',
    'team-subtitle': 'Meet the dedicated professionals behind our success',
    'team-rama-role': 'Owner & Founder',
    'team-rama-desc': 'Leading with expertise in international wood trading and building global partnerships',
    'team-shaymaa-role': 'Sales Agent',
    'team-shaymaa-desc': 'Dedicated to building strong relationships and delivering exceptional customer service',
    
    // Impact Section
    'impact-title': 'Our Impact in Numbers',
    'impact-subtitle': 'Building trust through measurable results',
    'impact-countries': 'Countries Exported To',
    'impact-partners': 'Trusted Global Partners',
    'impact-experience': 'Years of Experience',
    
    // Contact Section
    'contact-title': 'Contact Us',
    'contact-subtitle': 'Ready to start your wood trading journey?',
    'contact-owner': 'Owner',
    'contact-agent': 'Sales Agent',
    'contact-org': 'Organization Number',
    'contact-address': 'Address',
    'contact-whatsapp': 'Contact via WhatsApp',
    
    // Footer
    'footer-desc': 'Trusted Swedish company for global wood trading',
    'footer-company': 'Company',
    'footer-contact': 'Contact',
    'footer-rights': 'All rights reserved.'
  },
  ar: {
    // Navigation
    'nav-home': 'الرئيسية',
    'nav-about': 'عن الشركة',
    'nav-products': 'المنتجات',
    'nav-team': 'الفريق',
    'nav-impact': 'تأثيرنا',
    'nav-contact': 'اتصل بنا',
    
    // Hero Section
    'hero-title': 'شركة سويدية موثوقة لتجارة الأخشاب العالمية',
    'hero-subtitle': 'منتجات خشبية عالية الجودة مع أكثر من 10 سنوات من الخبرة في التجارة الدولية',
    'hero-cta-primary': 'استكشف المنتجات',
    'hero-cta-secondary': 'اتصل بنا',
    
    // About Section
    'about-title': 'عن شركة راما وود',
    'about-subtitle': 'نبني الثقة من خلال الجودة العالية والخبرة المتميزة',
    'about-description': 'شركة راما وود هي شركة سويدية رائدة وموثوقة تتمتع بأكثر من عشر سنوات من الخبرة المتخصصة في استيراد وتصدير أفضل أنواع الأخشاب المميزة. نحن معروفون في السوق العالمي بمصداقيتنا العالية وجودة منتجاتنا الفائقة وتجربة العملاء الاستثنائية. إن التزامنا الراسخ بمبادئ الاستدامة والسعي المستمر نحو التميز جعلنا الشريك المفضل والموثوق للشركات والمؤسسات في جميع أنحاء العالم.',
    'feature-quality': 'جودة مميزة عالمياً',
    'feature-global': 'انتشار عالمي واسع',
    'feature-trust': 'شريك موثوق ومعتمد',
    
    // Products Section
    'products-title': 'منتجاتنا الخشبية المميزة',
    'products-subtitle': 'مصدرة بعناية من جميع أنحاء العالم',
    'product-beech-name': 'خشب الزان',
    'product-beech-desc': 'قوي ومثالي للأثاث الحديث. من رومانيا وأوكرانيا والبوسنة والسويد. مكلف وعليه طلب كبير وربح جيد.',
    'product-pine-name': 'خشب الصنوبر',
    'product-pine-desc': 'الأكثر بأسعار معقولة. رائع للمطابخ والأبواب. من السويد وروسيا وفنلندا. مبيعات كبيرة الحجم وربح عالي.',
    'product-mdf-name': 'خشب MDF',
    'product-mdf-desc': 'يستخدم في الأثاث الاقتصادي والمكاتب. من تركيا والصين وماليزيا. تكلفة منخفضة ومربح بالجملة.',
    'product-oak-name': 'خشب البلوط',
    'product-oak-desc': 'مادة مميزة للأثاث الفاخر والأرضيات. من الولايات المتحدة وأوروبا الشرقية. متخصص وعائد مرتفع.',
    'product-teak-name': 'خشب الساج',
    'product-teak-desc': 'مقاوم للماء ومثالي للأثاث الخارجي. من الهند وبورما وإندونيسيا. مكلف وسوق محدد.',
    
    // Team Section
    'team-title': 'فريقنا الخبير',
    'team-subtitle': 'تعرف على المهنيين المتفانين وراء نجاحنا',
    'team-rama-role': 'المالك والمؤسس',
    'team-rama-desc': 'يقود بخبرة في تجارة الأخشاب الدولية وبناء الشراكات العالمية',
    'team-shaymaa-role': 'وكيل المبيعات',
    'team-shaymaa-desc': 'متفانية في بناء علاقات قوية وتقديم خدمة عملاء استثنائية',
    
    // Impact Section
    'impact-title': 'إنجازاتنا بالأرقام',
    'impact-subtitle': 'نبني الثقة من خلال النتائج المُثبتة والقابلة للقياس',
    'impact-countries': 'دولة نصدر إليها',
    'impact-partners': 'شريك عالمي موثوق',
    'impact-experience': 'سنوات من الخبرة',
    
    // Contact Section
    'contact-title': 'اتصل بنا',
    'contact-subtitle': 'مستعد لبدء رحلة تجارة الأخشاب؟',
    'contact-owner': 'المالك',
    'contact-agent': 'وكيل المبيعات',
    'contact-org': 'رقم المنظمة',
    'contact-address': 'العنوان',
    'contact-whatsapp': 'تواصل عبر واتساب',
    
    // Footer
    'footer-desc': 'شركة سويدية موثوقة لتجارة الأخشاب العالمية',
    'footer-company': 'الشركة',
    'footer-contact': 'اتصل بنا',
    'footer-rights': 'جميع الحقوق محفوظة.'
  },
  sv: {
    // Navigation
    'nav-home': 'Hem',
    'nav-about': 'Om oss',
    'nav-products': 'Produkter',
    'nav-team': 'Team',
    'nav-impact': 'Påverkan',
    'nav-contact': 'Kontakt',
    
    // Hero Section
    'hero-title': 'Pålitligt svenskt företag för global trähandel',
    'hero-subtitle': 'Premium kvalitet träprodukter med över 10 års expertis inom internationell handel',
    'hero-cta-primary': 'Utforska produkter',
    'hero-cta-secondary': 'Kontakta oss',
    
    // About Section
    'about-title': 'Om RamaWood',
    'about-subtitle': 'Bygger förtroende genom kvalitet och expertis',
    'about-description': 'RamaWood är ett pålitligt svenskt företag med över 10 års erfarenhet av import och export av premium trätyper. Vi är kända för vårt förtroende, kvalitet och exceptionella kundupplevelse. Vårt engagemang för hållbarhet och excellens har gjort oss till en föredragen partner för företag världen över.',
    'feature-quality': 'Premium kvalitet',
    'feature-global': 'Global räckvidd',
    'feature-trust': 'Pålitlig partner',
    
    // Products Section
    'products-title': 'Våra premium träprodukter',
    'products-subtitle': 'Noggrant hämtade från hela världen',
    'product-beech-name': 'Bokträ',
    'product-beech-desc': 'Starkt och idealiskt för moderna möbler. Från Rumänien, Ukraina, Bosnien, Sverige. Dyrt, hög efterfrågan, bra vinst.',
    'product-pine-name': 'Tallträ',
    'product-pine-desc': 'Mest prisvärt. Bra för kök och dörrar. Från Sverige, Ryssland, Finland. Hög volym försäljning och vinst.',
    'product-mdf-name': 'MDF-trä',
    'product-mdf-desc': 'Används i budgetmöbler och kontor. Från Turkiet, Kina, Malaysia. Låg kostnad, lönsam i bulk.',
    'product-oak-name': 'Ekträ',
    'product-oak-desc': 'Premium material för lyxmöbler och golv. Från USA, Östeuropa. Nisch, hög avkastning.',
    'product-teak-name': 'Teakträ',
    'product-teak-desc': 'Vattentätt och perfekt för utemöbler. Från Indien, Burma, Indonesien. Dyrt, specifik marknad.',
    
    // Team Section
    'team-title': 'Vårt expertteam',
    'team-subtitle': 'Möt de dedikerade proffsen bakom vår framgång',
    'team-rama-role': 'Ägare & grundare',
    'team-rama-desc': 'Leder med expertis inom internationell trähandel och bygger globala partnerskap',
    'team-shaymaa-role': 'Säljagent',
    'team-shaymaa-desc': 'Dedikerad till att bygga starka relationer och leverera exceptionell kundservice',
    
    // Impact Section
    'impact-title': 'Vår påverkan i siffror',
    'impact-subtitle': 'Bygger förtroende genom mätbara resultat',
    'impact-countries': 'Länder exporterade till',
    'impact-partners': 'Pålitliga globala partners',
    'impact-experience': 'År av erfarenhet',
    
    // Contact Section
    'contact-title': 'Kontakta oss',
    'contact-subtitle': 'Redo att starta din trähandelsresa?',
    'contact-owner': 'Ägare',
    'contact-agent': 'Säljagent',
    'contact-org': 'Organisationsnummer',
    'contact-address': 'Adress',
    'contact-whatsapp': 'Kontakta via WhatsApp',
    
    // Footer
    'footer-desc': 'Pålitligt svenskt företag för global trähandel',
    'footer-company': 'Företag',
    'footer-contact': 'Kontakt',
    'footer-rights': 'Alla rättigheter förbehållna.'
  }
};

// DOM elements
const navbar = document.getElementById('navbar');
const hamburger = document.getElementById('hamburger');
const navMenu = document.getElementById('nav-menu');
const langButtons = document.querySelectorAll('.lang-btn');

// Current language
let currentLang = 'en';

// Initialize
document.addEventListener('DOMContentLoaded', function() {
  initializeNavigation();
  initializeAnimations();
  initializeLanguageSwitcher();
  initializeCounters();
  initializeScrollEffects();
  initializeMobileMenu();
  initializeImageLoading();
});

// Navigation functionality
function initializeNavigation() {
  // Smooth scrolling for navigation links
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
      e.preventDefault();
      const target = document.querySelector(this.getAttribute('href'));
      if (target) {
        const offsetTop = target.offsetTop - 80;
        window.scrollTo({
          top: offsetTop,
          behavior: 'smooth'
        });
        
        // Close mobile menu if open
        navMenu.classList.remove('active');
        hamburger.classList.remove('active');
      }
    });
  });

  // Navbar scroll effect
  window.addEventListener('scroll', function() {
    if (window.scrollY > 100) {
      navbar.classList.add('scrolled');
    } else {
      navbar.classList.remove('scrolled');
    }
  });
}

// Mobile menu functionality
function initializeMobileMenu() {
  hamburger.addEventListener('click', function() {
    navMenu.classList.toggle('active');
    hamburger.classList.toggle('active');
  });

  // Close mobile menu when clicking outside
  document.addEventListener('click', function(e) {
    if (!navMenu.contains(e.target) && !hamburger.contains(e.target)) {
      navMenu.classList.remove('active');
      hamburger.classList.remove('active');
    }
  });

  // Close mobile menu when clicking on nav links
  navMenu.querySelectorAll('a').forEach(link => {
    link.addEventListener('click', function() {
      navMenu.classList.remove('active');
      hamburger.classList.remove('active');
    });
  });
}

// Image loading functionality
function initializeImageLoading() {
  const images = document.querySelectorAll('img');
  
  images.forEach(img => {
    img.addEventListener('load', function() {
      this.style.opacity = '1';
    });
    
    img.addEventListener('error', function() {
      console.warn('Failed to load image:', this.src);
      // Keep placeholder or show error state
    });
    
    // Set initial opacity
    img.style.opacity = '0';
    img.style.transition = 'opacity 0.3s ease';
  });
}

// Animation functionality
function initializeAnimations() {
  // Intersection Observer for scroll animations
  const observerOptions = {
    threshold: 0.15,
    rootMargin: '0px 0px -20px 0px'
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        entry.target.style.opacity = '1';
        entry.target.style.transform = 'translateY(0)';
        entry.target.classList.add('animate-in');
        
        // Trigger counter animation for impact numbers
        if (entry.target.classList.contains('impact-number')) {
          animateCounter(entry.target);
        }
        
        // Add stagger effect for product cards
        if (entry.target.classList.contains('product-card')) {
          const cards = document.querySelectorAll('.product-card');
          const index = Array.from(cards).indexOf(entry.target);
          entry.target.style.transitionDelay = `${index * 0.05}s`;
        }
      }
    });
  }, observerOptions);

  // Apply animations to elements
  const animateElements = document.querySelectorAll(
    '.section-title, .section-subtitle, .product-card, .impact-item, .contact-card, .team-member, .about-content > *, .hero-content > *'
  );

  animateElements.forEach((el, index) => {
    el.style.opacity = '0';
    el.style.transform = 'translateY(20px)';
    el.style.transition = `all 0.4s cubic-bezier(0.4, 0, 0.2, 1) ${index * 0.02}s`;
    observer.observe(el);
  });
}

// Counter animation for impact numbers
function animateCounter(element) {
  if (element.classList.contains('animated')) return;
  
  const target = parseInt(element.getAttribute('data-count'));
  const duration = 2000;
  const step = target / (duration / 16);
  let current = 0;

  element.classList.add('animated');

  const timer = setInterval(() => {
    current += step;
    if (current >= target) {
      current = target;
      clearInterval(timer);
    }
    element.textContent = Math.floor(current);
  }, 16);
}

function initializeCounters() {
  // This will be triggered by the intersection observer
}

// Scroll effects
function initializeScrollEffects() {
  let ticking = false;

  function updateScrollEffects() {
    const scrolled = window.pageYOffset;
    const rate = scrolled * -0.3;
    
    // Parallax effect for hero background
    const heroBackground = document.querySelector('.hero-bg-img');
    if (heroBackground) {
      heroBackground.style.transform = `translate3d(0, ${rate}px, 0)`;
    }
    
    // Update navbar active link based on scroll position
    updateActiveNavLink();
    
    ticking = false;
  }

  window.addEventListener('scroll', function() {
    if (!ticking) {
      requestAnimationFrame(updateScrollEffects);
      ticking = true;
    }
  });
}

// Update active navigation link based on scroll position
function updateActiveNavLink() {
  const sections = document.querySelectorAll('section[id]');
  const navLinks = document.querySelectorAll('.nav-menu a[href^="#"]');
  
  let current = '';
  
  sections.forEach(section => {
    const sectionTop = section.offsetTop - 100;
    const sectionHeight = section.clientHeight;
    
    if (window.pageYOffset >= sectionTop && window.pageYOffset < sectionTop + sectionHeight) {
      current = section.getAttribute('id');
    }
  });
  
  navLinks.forEach(link => {
    link.classList.remove('active');
    if (link.getAttribute('href') === `#${current}`) {
      link.classList.add('active');
    }
  });
}

// Language switcher functionality
function initializeLanguageSwitcher() {
  langButtons.forEach(button => {
    button.addEventListener('click', function() {
      const selectedLang = this.getAttribute('data-lang');
      if (selectedLang !== currentLang) {
        switchLanguage(selectedLang);
        updateActiveLangButton(this);
      }
    });
  });
}

function switchLanguage(lang) {
  currentLang = lang;
  
  // Update text content
  const elements = document.querySelectorAll('[data-translate]');
  elements.forEach(element => {
    const key = element.getAttribute('data-translate');
    if (translations[lang] && translations[lang][key]) {
      element.textContent = translations[lang][key];
    }
  });
  
  // Update HTML attributes
  document.documentElement.lang = lang;
  document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';
  
  // Update page title
  const titles = {
    en: 'RamaWood - Trusted Swedish Wood Trading Company',
    ar: 'راما وود - شركة سويدية موثوقة لتجارة الأخشاب',
    sv: 'RamaWood - Pålitligt svenskt trähandelsföretag'
  };
  document.title = titles[lang] || titles.en;
  
  // Add smooth transition for RTL switch
  document.body.style.transition = 'all 0.3s ease';
  setTimeout(() => {
    document.body.style.transition = '';
  }, 300);
}

function updateActiveLangButton(activeButton) {
  langButtons.forEach(button => button.classList.remove('active'));
  activeButton.classList.add('active');
}

// Enhanced smooth scrolling with easing
function smoothScrollTo(target, duration = 800) {
  const targetPosition = target.offsetTop - 80;
  const startPosition = window.pageYOffset;
  const distance = targetPosition - startPosition;
  let startTime = null;

  function ease(t, b, c, d) {
    t /= d / 2;
    if (t < 1) return c / 2 * t * t + b;
    t--;
    return -c / 2 * (t * (t - 2) - 1) + b;
  }

  function animation(currentTime) {
    if (startTime === null) startTime = currentTime;
    const timeElapsed = currentTime - startTime;
    const run = ease(timeElapsed, startPosition, distance, duration);
    window.scrollTo(0, run);
    if (timeElapsed < duration) requestAnimationFrame(animation);
  }

  requestAnimationFrame(animation);
}

// Utility functions
function debounce(func, wait) {
  let timeout;
  return function executedFunction(...args) {
    const later = () => {
      clearTimeout(timeout);
      func(...args);
    };
    clearTimeout(timeout);
    timeout = setTimeout(later, wait);
  };
}

// Performance optimizations
window.addEventListener('load', function() {
  // Remove loading states, add loaded states
  document.body.classList.add('loaded');
  
  // Lazy load images that are not in viewport
  const lazyImages = document.querySelectorAll('img[data-src]');
  const imageObserver = new IntersectionObserver((entries, observer) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const img = entry.target;
        img.src = img.dataset.src;
        img.classList.remove('lazy');
        imageObserver.unobserve(img);
      }
    });
  });
  
  lazyImages.forEach(img => imageObserver.observe(img));
});

// Error handling
window.addEventListener('error', function(e) {
  console.error('Script error:', e.error);
});

// Touch and gesture support for mobile
let touchStartY = 0;
let touchEndY = 0;

document.addEventListener('touchstart', function(e) {
  touchStartY = e.changedTouches[0].screenY;
}, { passive: true });

document.addEventListener('touchend', function(e) {
  touchEndY = e.changedTouches[0].screenY;
  handleSwipe();
}, { passive: true });

function handleSwipe() {
  const swipeThreshold = 50;
  const diff = touchStartY - touchEndY;
  
  if (Math.abs(diff) > swipeThreshold) {
    // Handle swipe gestures if needed
    if (diff > 0) {
      // Swipe up - could trigger scroll to next section
    } else {
      // Swipe down - could trigger scroll to previous section
    }
  }
}

// Accessibility improvements
document.addEventListener('keydown', function(e) {
  if (e.key === 'Escape') {
    // Close mobile menu on escape key
    navMenu.classList.remove('active');
    hamburger.classList.remove('active');
  }
  
  // Skip to main content functionality
  if (e.key === 'Tab' && e.shiftKey === false) {
    const focusedElement = document.activeElement;
    if (focusedElement && focusedElement.classList.contains('skip-link')) {
      e.preventDefault();
      document.querySelector('main, #hero').focus();
    }
  }
});

// Focus management for keyboard navigation
const focusableElements = 'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])';

function trapFocus(element) {
  const focusable = element.querySelectorAll(focusableElements);
  const firstFocusable = focusable[0];
  const lastFocusable = focusable[focusable.length - 1];

  element.addEventListener('keydown', function(e) {
    if (e.key === 'Tab') {
      if (e.shiftKey) {
        if (document.activeElement === firstFocusable) {
          lastFocusable.focus();
          e.preventDefault();
        }
      } else {
        if (document.activeElement === lastFocusable) {
          firstFocusable.focus();
          e.preventDefault();
        }
      }
    }
  });
}

// Initialize focus trapping for mobile menu
if (navMenu) {
  trapFocus(navMenu);
}

// Enhanced product card interactions
document.addEventListener('DOMContentLoaded', function() {
  const productCards = document.querySelectorAll('.product-card');
  
  productCards.forEach(card => {
    card.addEventListener('mouseenter', function() {
      this.style.transform = 'translateY(-10px) scale(1.02)';
    });
    
    card.addEventListener('mouseleave', function() {
      this.style.transform = 'translateY(0) scale(1)';
    });
  });
});

// Contact form enhancement (if needed in future)
function initializeContactForm() {
  const contactForms = document.querySelectorAll('form');
  
  contactForms.forEach(form => {
    form.addEventListener('submit', function(e) {
      e.preventDefault();
      // Handle form submission
      console.log('Form submitted');
    });
  });
}

// Initialize all enhancements
document.addEventListener('DOMContentLoaded', function() {
  // Additional initialization can be added here
  console.log('RamaWood website loaded successfully');
});
